<div class="min-h-[100vh] pt-20 flex items-center justify-center bg-[#f7f7f7] px-8 py-4">
  <div class="bg-white rounded-2xl shadow-lg p-10 w-full max-w-md flex flex-col items-center">
    <img src="assets/images/logo.png" alt="SupportLink logo" class="w-20 h-20 mb-4" />
    <h1 class="text-3xl font-bold mb-2 font-['Inter','DM_Serif_Display',Helvetica]">
      {{ 'GENERAL.SUPPORT' | translate }}<span class="text-[var(--main-color)]">{{ 'GENERAL.LINK' | translate }}</span>
    </h1>
    <ng-container *ngIf="!showOtpScreen; else otpScreen">
      <h2 class="text-xl font-['DM_Serif_Display',Helvetica] mb-1">{{ 'LOGIN.WELCOME_BACK' | translate }}</h2>
      <p class="mb-6 text-gray-500">{{ 'LOGIN.LOGIN_TO_YOUR_ACCOUNT' | translate }}</p>
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="w-full space-y-4">
        <div class="relative">
          <input type="email" formControlName="email" placeholder="{{ 'LOGIN.EMAIL_LABEL' | translate }}"
            class="w-full px-4 py-3 rounded-lg bg-[#f7f8fa] border border-transparent focus:border-[var(--main-color)] focus:bg-white outline-none" />
          <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">
            <i class="fa fa-envelope"></i>
          </span>
          <div class="text-xs text-red-500 mt-1"
            *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.touched">
            <span *ngIf="loginForm.get('email')?.errors?.['required']">{{ 'LOGIN.EMAIL_REQUIRED' | translate }}</span>
            <span *ngIf="loginForm.get('email')?.errors?.['email']">{{ 'LOGIN.EMAIL_INVALID' | translate }}</span>
          </div>
        </div>
        <div class="relative">
          <input [type]="showPassword ? 'text' : 'password'" formControlName="password"
            placeholder="{{ 'LOGIN.PASSWORD_LABEL' | translate }}"
            class="w-full px-4 py-3 rounded-lg bg-[#f7f8fa] border border-transparent focus:border-[var(--main-color)] focus:bg-white outline-none" />
          <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">
            <i class="fa fa-lock"></i>
          </span>
          <span class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 cursor-pointer"
            (click)="showPassword = !showPassword">
            <i class="fa" [ngClass]="showPassword ? 'fa-eye' : 'fa-eye-slash'"></i>
          </span>
          <div class="text-xs text-red-500 mt-1"
            *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
            <span *ngIf="loginForm.get('password')?.errors?.['required']">{{ 'LOGIN.PASSWORD_REQUIRED' | translate
              }}</span>
            <span *ngIf="loginForm.get('password')?.errors?.['minlength']">{{ 'LOGIN.PASSWORD_MINLENGTH' | translate
              }}</span>
          </div>
        </div>
        <div class="flex justify-end w-full">
          <a href="#" (click)="navigateToPasswordReset()"
            class="text-blue-600 font-semibold hover:underline cursor-pointer">
            {{ 'LOGIN.RECOVER_PASSWORD' | translate }}
        </a>
        </div>
        <div class="text-center text-sm text-gray-500">
          {{ 'LOGIN.NO_ACCOUNT' | translate }}
          <a href="#" (click)="navigateToSignup()"
            class="text-blue-600 font-semibold hover:underline cursor-pointer">
            {{ 'LOGIN.SIGN_UP' | translate }}
        </a>
        </div>
        <button type="submit"
          class="w-full py-3 rounded-xl bg-[var(--main-color)] text-white font-bold text-lg mt-2 transition hover:bg-orange-600 cursor-pointer"
          [disabled]="loginForm.invalid || isLoading">
          <ng-container *ngIf="isLoading; else loginText">{{ 'LOGIN.LOGGING_IN' | translate }}</ng-container>
          <ng-template #loginText>{{ 'LOGIN.LOGIN_BUTTON' | translate }}</ng-template>
        </button>
      </form>
    </ng-container>
    <ng-template #otpScreen>
      <h2 class="text-xl font-semibold mb-1">{{ 'OTP.GET_STARTED' | translate }} <span
          class="text-blue-600">{{'GENERAL.SUPPORT_LINK' | translate}}</span></h2>
      <p class="mb-6 text-gray-500">{{ 'OTP.CREATE_ACCOUNT' | translate }}</p>
      <form [formGroup]="otpForm" (ngSubmit)="onOtpSubmit()" class="w-full space-y-4">
        <div class="relative">
          <input type="text" maxlength="6" formControlName="otp" placeholder="{{ 'OTP.ENTER_OTP' | translate }}"
            class="w-full px-4 py-3 rounded-lg bg-[#f7f8fa] border border-transparent focus:border-[var(--main-color)] focus:bg-white outline-none text-xl" />
          <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-lg">
            <i class="fa fa-hashtag"></i>
          </span>
          <div class="text-xs text-red-500 mt-1" *ngIf="otpForm.get('otp')?.invalid && otpForm.get('otp')?.touched">
            <span *ngIf="otpForm.get('otp')?.errors?.['required']">{{ 'OTP.OTP_REQUIRED' | translate }}</span>
            <span *ngIf="otpForm.get('otp')?.errors?.['minlength']">{{ 'OTP.OTP_MINLENGTH' | translate }}</span>
          </div>
        </div>
        <button type="submit"
          class="w-full py-3 rounded-xl bg-[var(--main-color)] text-white font-bold text-lg mt-2 transition hover:bg-orange-600"
          [disabled]="otpForm.invalid  || isLoading">
          <ng-container *ngIf="isLoading; else nextText">{{ 'OTP.VERIFYING' | translate }}</ng-container>
          <ng-template #nextText>{{ 'OTP.NEXT' | translate }}</ng-template>
        </button>
      </form>
    </ng-template>
  </div>
</div>