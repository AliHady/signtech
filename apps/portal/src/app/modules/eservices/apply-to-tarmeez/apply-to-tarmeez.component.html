<app-header></app-header>
<div class="min-h-screen bg-gray-50" [@routeAnimations]>
  <app-breadcrumbs></app-breadcrumbs>

  <main class="main-content bg-white overflow-hidden">
    <div class="container mx-auto px-4 py-8 max-w-3xl">
      <!-- Alert Messages -->
      @if (successMessage) {
        <div class="mb-6 p-4  bg-green-50 text-green-700 border border-green-200">
          {{ successMessage }}
        </div>
      }

      @if (errorMessage) {
        <div class="mb-6 p-4  bg-red-50 text-red-700 border border-red-200">
          {{ errorMessage }}
        </div>
      }

      <!-- Form Container -->
      <div class="">
        <form [formGroup]="applyForm" (ngSubmit)="onSubmit()" class="space-y-6">
          <!-- Organization Name -->
          <app-text-input
            [label]="'APPLY-TO-TARMEEZ.ORGANIZATION-NAME' | translate"
            [placeholder]="'APPLY-TO-TARMEEZ.ORGANIZATION-NAME' | translate"
            [control]="applyForm.get('organizationName')"
            [formSubmitted]="formSubmitted"
            [errorMessage]="'GENERAL.IS_REQUIRED' | translate"
            [required]="true"
            formControlName="organizationName">
          </app-text-input>

          <!-- Communication Supervisor Name -->
          <app-text-input
            [label]="'APPLY-TO-TARMEEZ.COMMUNICATION-SUPERVISOR-NAME' | translate"
            [placeholder]="'APPLY-TO-TARMEEZ.COMMUNICATION-SUPERVISOR-NAME' | translate"
            [control]="applyForm.get('communicationSupervisorName')"
            [formSubmitted]="formSubmitted"
            [required]="true"
            [errorMessage]="'GENERAL.IS_REQUIRED' | translate"
            formControlName="communicationSupervisorName">
          </app-text-input>

          <!-- Mobile Number -->
          <app-text-input
            [label]="'APPLY-TO-TARMEEZ.MOBILE-NUMBER' | translate"
            [placeholder]="'APPLY-TO-TARMEEZ.MOBILE-NUMBER' | translate"
            [control]="applyForm.get('mobileNumber')"
            [formSubmitted]="formSubmitted"
            [required]="true"
            [errorMessage]="'GENERAL.IS_REQUIRED' | translate"
            formControlName="mobileNumber">
          </app-text-input>

          <!-- Email -->
          <app-email-input
            [label]="'APPLY-TO-TARMEEZ.EMAIL' | translate"
            [placeholder]="'APPLY-TO-TARMEEZ.EMAIL' | translate"
            [control]="applyForm.get('email')"
            [formSubmitted]="formSubmitted"
            [errorMessage]="'GENERAL.IS_REQUIRED' | translate"
            formControlName="email">
          </app-email-input>

          <!-- File Inputs -->
          <div class="space-y-6">
            @for (fileField of [
              { key: 'crFile', label: 'CR-FILE' },
              { key: 'taxFile', label: 'TAX-FILE' },
              { key: 'gosiFile', label: 'GOSI-FILE' },
              { key: 'financialStatementsFile', label: 'FINANCIAL-STATEMENTS-FILE' },
              { key: 'investmentLicenseFile', label: 'INVESTMENT-LICENSE-FILE' },
              { key: 'chamberOfCommerceCertificateFile', label: 'CHAMBER-OF-COMMERCE-CERTIFICATE-FILE' },
              { key: 'businessClassificationCertificateFile', label: 'BUSINESS-CLASSIFICATION-CERTIFICATE-FILE' },
              { key: 'certificateToTheSaudiCouncilOfEngineersFile', label: 'CERTIFICATE-TO-THE-SAUDI-COUNCIL-OF-ENGINEERS-FILE' },
              { key: 'certificateOfAchievingTheRegularPercentageFile', label: 'CERTIFICATE-OF-ACHIEVING-THE-REGULAR-PERCENTAGE-FILE' },
              { key: 'certificateOfExperienceFile', label: 'CERTIFICATE-OF-EXPERIENCE-FILE' },
              { key: 'priceOffer', label: 'PRICE-OFFER' }
            ]; track fileField.key) {
              <app-file-upload
                [label]="'APPLY-TO-TARMEEZ.' + fileField.label | translate"
                [control]="applyForm.get(fileField.key)"
                [required]="true"
                [formSubmitted]="formSubmitted"
                [errorMessage]="'GENERAL.IS_REQUIRED' | translate"
                [acceptedFileTypes]="'.pdf,.doc,.docx,.jpg,.jpeg,.png'"
                [maxFileSize]="10485760"
                [formControlName]="fileField.key">
              </app-file-upload>
            }
          </div>

          <!-- Submit and Clear Buttons -->
          <div class="flex flex-col sm:flex-row gap-4 pt-6">
            <button type="submit" 
                    [disabled]="applyForm.invalid"
                    class="px-8 py-3 text-white bg-[var(--color-nimicgreen)] hover:bg-[#413258] disabled:opacity-50 disabled:cursor-not-allowed border-0 font-medium font-inherit font-['DiodrumArabic']">
              {{ 'APPLY-TO-TARMEEZ.SUBMIT' | translate }}
            </button>
            <button type="button" 
                    (click)="applyForm.reset()"
                    class="px-8 py-3 text-[var(--color-nimicgreen)] bg-transparent hover:bg-[#413258] hover:text-white border border-[var(--color-nimicgreen)] font-medium font-inherit font-['DiodrumArabic']">
              {{ 'APPLY-TO-TARMEEZ.CLEAR' | translate }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </main>
</div>
<app-footer></app-footer>