<app-header></app-header>
<div class="news-container">

  <app-breadcrumbs></app-breadcrumbs>
  <main class="news-content bg-white" [@routeAnimations]>
    <!-- NEWS GRID â€” Arabic content, so the whole section is RTL -->
    <section  class="container mx-auto px-1 py-8">
      <!-- Loading Skeleton -->
      @if (loading) {
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          @for (i of [1,2,3,4,5,6]; track i) {
            <ngx-skeleton-loader
              [theme]="{ height: '300px', 'border-radius': '8px', 'background-color': '#f3f4f6' }"
              [count]="1"
              [animation]="'pulse'">
            </ngx-skeleton-loader>
          }
        </div>
      }

      <!-- Events Grid -->
      @if (!loading) {
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          @for (event of paginatedEvents; track event) {
            <div class="event-card bg-white -lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 cursor-pointer"
                 (click)="navigateToEventsDetails(event)">
              <div class="relative">
                <img [src]="portalUrl + event.EventImage" 
                     [alt]="event.Title"
                     class="w-full h-48 object-cover">
                <div class="absolute top-2 right-2 bg-primary text-white px-3 py-1 -full text-sm">
                  {{ event.EventStart }}
                </div>
              </div>
              <div class="p-4">
                <h3 class="text-lg font-semibold mb-2">{{ event.Title }}</h3>
                <p class="text-gray-600 line-clamp-2">{{ event.ContentSummary }}</p>
              </div>
            </div>
          }
        </div>
      }

      <!-- Pagination -->
      @if (!loading && totalPages > 1) {
        <div class="flex justify-center mt-12">
          <nav class="flex items-center" aria-label="Pagination">
            @for (page of getPages(); track page) {
              <button
                (click)="onPageChange(page)"
                [class.bg-[#344549]]="currentPage === page"
                [class.text-white]="currentPage === page"
                [class.border-[#344549]]="currentPage === page"
                [class.pointer-events-none]="currentPage === page"
                class="px-4 py-2 hover:bg-gray-100 transition-all duration-300 min-w-[40px] border border-transparent mx-1.5 cursor-pointer"
                [attr.aria-current]="currentPage === page ? 'page' : null"
              >
                {{ page }}
              </button>
            }
          </nav>
        </div>
      }

      <!-- Error Message -->
      @if (error) {
        <div class="text-center text-red-500 mt-4">
          {{ error }}
        </div>
      }
    </section>
  </main>


</div>

<app-footer></app-footer>