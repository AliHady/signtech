<app-header></app-header>
<div class="main-container">

  <app-breadcrumbs></app-breadcrumbs>
  <main class="main-content bg-white" [@routeAnimations]>
    <!-- NEWS GRID — Arabic content, so the whole section is RTL -->
    <section class="container mx-auto px-1 py-8">
      <div class="list-of-services">
        <h2 class="text-2xl font-bold mb-8 text-right">قائمة الخدمات</h2>
        
        @if (loading) {
          <div class="services-grid">
            @for (i of [1,2,3,4,5,6]; track i) {
              <div class="service-card skeleton">
                <div class="skeleton-image"></div>
                <div class="skeleton-title"></div>
                <div class="skeleton-description"></div>
              </div>
            }
          </div>
        }

        @if (error) {
          <div class="error-message text-red-500 text-center p-4">
            {{ error }}
          </div>
        }

        @if (!loading && !error) {
          <div class="services-grid">
            @for (service of paginatedServices; track service) {
              <div class="service-card cursor-pointer"
                   (click)="navigateToNewsDetails(service)">
                <div class="service-image">
                  @if (service.Image) {
                    <img [src]="portalUrl + service.Image" [alt]="service.Title">
                  } @else {
                    <div class="image-placeholder">
                      <i class="fas fa-cogs"></i>
                    </div>
                  }
                </div>
                <div class="service-content">
                  <h3 class="service-title">{{ service.Title }}</h3>
                  @if (service.ContentSummary) {
                    <p class="service-description">
                      {{ service.ContentSummary }}
                    </p>
                  }
                  <div class="service-footer">
                    <span class="service-link">View Details <i class="fas fa-arrow-left"></i></span>
                  </div>
                </div>
              </div>
            }
          </div>
        }

        @if (totalPages > 1) {
          <div class="pagination mt-8 flex justify-center gap-2">
            @for (page of getPages(); track page) {
              <button [class.active]="currentPage === page"
                      (click)="onPageChange(page)"
                      class="px-4 py-2 rounded-md border hover:bg-gray-100">
                {{ page }}
              </button>
            }
          </div>
        }
      </div>
    </section>
  </main>
</div>  
<app-footer></app-footer>