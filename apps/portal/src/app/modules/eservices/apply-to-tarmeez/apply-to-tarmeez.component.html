<app-header></app-header>
<div class="min-h-screen bg-gray-50" [@routeAnimations]>
  <app-breadcrumbs></app-breadcrumbs>

  <main class="main-content bg-white overflow-hidden">
    <div class="container mx-auto px-4 py-8 max-w-3xl">
      <!-- Alert Messages -->
      @if (successMessage) {
        <div class="mb-6 p-4  bg-green-50 text-green-700 border border-green-200">
          {{ successMessage }}
        </div>
      }

      @if (errorMessage) {
        <div class="mb-6 p-4  bg-red-50 text-red-700 border border-red-200">
          {{ errorMessage }}
        </div>
      }

      <!-- Form Container -->
      <div class="">
        <form [formGroup]="applyForm" (ngSubmit)="onSubmit()" class="space-y-6">
          <!-- Organization Name -->
          <app-text-input
            [label]="'APPLY-TO-TARMEEZ.ORGANIZATION-NAME' | translate"
            [placeholder]="'APPLY-TO-TARMEEZ.ORGANIZATION-NAME' | translate"
            [control]="applyForm.get('organizationName')"
            [formSubmitted]="formSubmitted"
            [errorMessage]="'GENERAL.IS_REQUIRED' | translate"
            formControlName="organizationName">
          </app-text-input>

          <!-- Communication Supervisor Name -->
          <app-text-input
            [label]="'APPLY-TO-TARMEEZ.COMMUNICATION-SUPERVISOR-NAME' | translate"
            [placeholder]="'APPLY-TO-TARMEEZ.COMMUNICATION-SUPERVISOR-NAME' | translate"
            [control]="applyForm.get('communicationSupervisorName')"
            [formSubmitted]="formSubmitted"
            [errorMessage]="'GENERAL.IS_REQUIRED' | translate"
            formControlName="communicationSupervisorName">
          </app-text-input>

          <!-- Mobile Number -->
          <app-text-input
            [label]="'APPLY-TO-TARMEEZ.MOBILE-NUMBER' | translate"
            [placeholder]="'APPLY-TO-TARMEEZ.MOBILE-NUMBER' | translate"
            [control]="applyForm.get('mobileNumber')"
            [formSubmitted]="formSubmitted"
            [errorMessage]="'GENERAL.IS_REQUIRED' | translate"
            formControlName="mobileNumber">
          </app-text-input>

          <!-- Email -->
          <app-email-input
            [label]="'APPLY-TO-TARMEEZ.EMAIL' | translate"
            [placeholder]="'APPLY-TO-TARMEEZ.EMAIL' | translate"
            [control]="applyForm.get('email')"
            [formSubmitted]="formSubmitted"
            [errorMessage]="'GENERAL.IS_REQUIRED' | translate"
            formControlName="email">
          </app-email-input>

          <!-- File Inputs -->
          <div class="space-y-6">
            @for (fileField of [
              'CR-FILE',
              'TAX-FILE',
              'GOSI-FILE',
              'FINANCIAL-STATEMENTS-FILE',
              'INVESTMENT-LICENSE-FILE',
              'CHAMBER-OF-COMMERCE-CERTIFICATE-FILE',
              'BUSINESS-CLASSIFICATION-CERTIFICATE-FILE',
              'CERTIFICATE-TO-THE-SAUDI-COUNCIL-OF-ENGINEERS-FILE',
              'CERTIFICATE-OF-ACHIEVING-THE-REGULAR-PERCENTAGE-FILE',
              'CERTIFICATE-OF-EXPERIENCE-FILE',
              'PRICE-OFFER'
            ]; track fileField) {
              <div class="space-y-2">
                <label [for]="fileField" class="block text-sm font-medium text-gray-700">
                  {{ 'APPLY-TO-TARMEEZ.' + fileField | translate }}
                </label>
                <div class="mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed ">
                  <div class="space-y-1 text-center">
                    <input type="file" 
                           class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file: file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"
                           [id]="fileField" 
                           (change)="onFileChange($event, fileField)" />
                  </div>
                </div>
                @if (applyForm.get(fileField)?.invalid && applyForm.get(fileField)?.touched) {
                  <div class="text-sm text-red-600">
                    {{ 'APPLY-TO-TARMEEZ.' + fileField | translate }} {{'GENERAL.IS_REQUIRED' | translate}}
                  </div>
                }
              </div>
            }
          </div>

          <!-- Submit and Clear Buttons -->
          <div class="flex flex-col sm:flex-row gap-4 pt-6">
            <button type="submit" 
                    [disabled]="applyForm.invalid"
                    class="px-8 py-3 text-white bg-[#344549] hover:bg-[#413258] disabled:opacity-50 disabled:cursor-not-allowed border-0 font-medium font-inherit font-['DiodrumArabic']">
              {{ 'APPLY-TO-TARMEEZ.SUBMIT' | translate }}
            </button>
            <button type="button" 
                    (click)="applyForm.reset()"
                    class="px-8 py-3 text-[#344549] bg-transparent hover:bg-[#413258] hover:text-white border border-[#344549] font-medium font-inherit font-['DiodrumArabic']">
              {{ 'APPLY-TO-TARMEEZ.CLEAR' | translate }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </main>
</div>
<app-footer></app-footer>