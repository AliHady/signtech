<app-header></app-header>
<div class="news-container">

  <app-breadcrumbs [items]="[
    { label: 'الرئيسية', url: '/ar/home' },
    { label: 'المركز الإعلامي', url: '/ar/mediacenter' },
    { label:'الأحداث والفعاليات' }
  ]"></app-breadcrumbs>
  <main class="news-content bg-white" [@routeAnimations]>
    <!-- NEWS GRID — Arabic content, so the whole section is RTL -->
    <section  class="container mx-auto px-6 py-16">
      <!-- Loading Skeleton -->
      <div *ngIf="loading" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <ngx-skeleton-loader
          *ngFor="let i of [1,2,3,4,5,6]"
          [theme]="{ height: '300px', 'border-radius': '8px' }"
          [count]="1"
          [animation]="'pulse'">
        </ngx-skeleton-loader>
      </div>

      <!-- Events Grid -->
      <div *ngIf="!loading" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <div *ngFor="let event of paginatedEvents" 
             class="event-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 cursor-pointer"
             (click)="navigateToEventsDetails(event)">
          <div class="relative">
            <img [src]="portalUrl + event.EventImage" 
                 [alt]="event.Title"
                 class="w-full h-48 object-cover">
            <div class="absolute top-2 right-2 bg-primary text-white px-3 py-1 rounded-full text-sm">
              {{ event.EventStart | date:'dd/MM/yyyy' }}
            </div>
          </div>
          <div class="p-4">
            <h3 class="text-lg font-semibold mb-2">{{ event.Title }}</h3>
            <p class="text-gray-600 line-clamp-2">{{ event.ContentSummary }}</p>
          </div>
        </div>
      </div>

      <!-- Pagination -->
      <div *ngIf="!loading && totalPages > 1" class="mt-8 flex justify-center">
        <div class="flex space-x-2">
          <button *ngFor="let page of getPages()"
                  (click)="onPageChange(page)"
                  [class.bg-primary]="currentPage === page"
                  [class.text-white]="currentPage === page"
                  class="px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-100">
            {{ page }}
          </button>
        </div>
      </div>

      <!-- Error Message -->
      <div *ngIf="error" class="text-center text-red-500 mt-4">
        {{ error }}
      </div>
    </section>
  </main>


</div>

<app-footer></app-footer>